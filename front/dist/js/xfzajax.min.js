function getCookie(e){var o=null;if(document.cookie&&""!==document.cookie)for(var s=document.cookie.split(";"),t=0;t<s.length;t++){var r=jQuery.trim(s[t]);if(r.substring(0,e.length+1)===e+"="){o=decodeURIComponent(r.substring(e.length+1));break}}return o}var xfzajax={get:function(e){e.method="get",this.ajax(e)},post:function(e){e.method="post",this._ajaxSetup(),this.ajax(e)},ajax:function(e){var r=e.success;e.success=function(e){if(200===e.code)r&&r(e);else{var o=e.message;if("string"==typeof o||o.constructor==String)window.messageBox.showError(o);else for(var s in o){var t=o[s][0];window.messageBox.showError(t)}r&&r(e)}},e.fail=function(e){console.log(e),window.messageBox.showError("服务器内部错误！")},$.ajax(e)},_ajaxSetup:function(){$.ajaxSetup({beforeSend:function(e,o){/^(GET|HEAD|OPTIONS|TRACE)$/.test(o.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}})}};function Message(){var e=this;e.isAppended=!1,e.wrapperHeight=48,e.wrapperWidth=300,e.initStyle(),e.initElement(),e.listenCloseEvent()}Message.prototype.initStyle=function(){var e=this;e.errorStyle={wrapper:{background:"#f2dede",color:"#993d3d"},close:{color:"#993d3d"}},e.successStyle={wrapper:{background:"#dff0d8",color:"#468847"},close:{color:"#468847"}},e.infoStyle={wrapper:{background:"#d9edf7",color:"#5bc0de"},close:{color:"#5bc0de"}}},Message.prototype.initElement=function(){var e=this;e.wrapper=$("<div></div>"),e.wrapper.css({padding:"10px","font-size":"14px",width:"300px",position:"fixed","z-index":"10000",left:"50%",top:"-48px","margin-left":"-150px",height:"48px","box-sizing":"border-box",border:"1px solid #ddd","border-radius":"4px","line-height":"24px","font-weight":700}),e.closeBtn=$("<span>×</span>"),e.closeBtn.css({"font-family":'core_sans_n45_regular,"Avenir Next","Helvetica Neue",Helvetica,Arial,"PingFang SC","Source Han Sans SC","Hiragino Sans GB","Microsoft YaHei","WenQuanYi MicroHei",sans-serif;',"font-weight":"700",float:"right",cursor:"pointer","font-size":"22px"}),e.messageSpan=$("<span class='xfz-message-group'></span>"),e.wrapper.append(e.messageSpan),e.wrapper.append(e.closeBtn)},Message.prototype.listenCloseEvent=function(){var e=this;e.closeBtn.click(function(){e.wrapper.animate({top:-e.wrapperHeight})})},Message.prototype.showError=function(e){this.show(e,"error")},Message.prototype.showSuccess=function(e){this.show(e,"success")},Message.prototype.showInfo=function(e){this.show(e,"info")},Message.prototype.show=function(e,o){var s=this;s.isAppended||($(document.body).append(s.wrapper),s.isAppended=!0),s.messageSpan.text(e),"error"===o?(s.wrapper.css(s.errorStyle.wrapper),s.closeBtn.css(s.errorStyle.close)):"info"===o?(s.wrapper.css(s.infoStyle.wrapper),s.closeBtn.css(s.infoStyle.close)):(s.wrapper.css(s.successStyle.wrapper),s.closeBtn.css(s.successStyle.close)),s.wrapper.animate({top:0},function(){setTimeout(function(){s.wrapper.animate({top:-s.wrapperHeight})},3e3)})},window.messageBox=new Message;